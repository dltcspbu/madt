
Инструкции по установке
=======================

Большая часть этого раздела описывает установку системы MADT вручную. 
Однако лучше по возможности запускать MADT в контейнере, поскольку это значительно 
сокращает время развертывания. Все, что вам нужно сделать для развертывания MADT через Docker, 
это использовать Dockerfile, поставляемый с системой, для создания образа Docker: ::

    docker build -t madt .

Ручная установка
----------------

Перед установкой MADT необходимо установить системные пакеты, нужные для его работы.
В зависимости от используемого дистрибутива Linux 
имена пакетов могут отличаться, этот список предназначен для Alpine Linux:

* cmake
* gcc
* linux-headers
* musl-dev
* python3
* python3-dev
* net-tools
* iproute2
* zeromq-dev
* tinc
* libffi-dev
* openssl-dev
* openssh
* curl

Madt также нужен docker для работы. Инструкции по установке доступны в 
`официальной документации докера <http://docs.docker.com/install/>`_. 

Для установки MADT необходимо скачать его репозиторий: :: 

    git clone https://github.com/dltcspbu/madt.git

Вы можете самостоятельно задать каталоги для хранения моделей и сокетов IPC. 
По умолчанию для их хранения создаются папки `labs` и `sockets` соответственно 
в папке репозитория. 
Вы можете изменить их расположение, изменив заничения переменных 
`MADT_LABS_DIR` и `MADT_LABS_SOCKETS_DIR` в Makefile.

Далее в папке репозитория запустите команду ::
        sudo make

После этого система готова к работе.

Запуск MADT UI
--------------

Для запуска веб-сервера необходимо обладать sudo-правами.

Docker:
+++++++

``docker run -d --privileged --name madt -v <path/to/madt/folder>/madt_labs:/app/labs -p [port]:80 madt``

Ручная установка:
+++++++++++++++++

.. code-block:: bash

    cd <path/to/madt/folder>/madt_ui
    sudo -E python3 main.py [ port ]

В обоих случаях [port] должен быть заменен портом, на котором будет запущен веб-интерфейс.

После того как контейнер успешно запустится, перейдите на страницу UI MADT localhost:[port].
